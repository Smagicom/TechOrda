# mongo-replicas

Использование одного MongoDB сервера — это простой способ начать работу, но опасный способ запуска на проде.
Что, если ваш сервер выйдет из строя или станет недоступен? Ваша база данных будет недоступна по крайней мере некоторое время.
Если есть проблемы с оборудованием, возможно, вам придется перенести данные на другой сервер. В худшем случае проблемы с диском или сетью могут привести к повреждению или недоступности данных.

Репликация — это способ хранения идентичных копий данных на нескольких серверах, который рекомендуется для деплоя в продакшн. Репликация поддерживает работу приложения и безопасность ваших данных, даже если что-то случится с одним или несколькими серверами.

В MongoDB можно настроить репликацию, создавая replica set. Replica Set — это группа серверов с одним главным сервером, выполняющим запись, и несколькими вторичными серверами, на которых хранятся копии данных главного. Если главный выходит из строя, вторичные могут выбрать нового главного из своего числа.

Если вы используете репликацию и сервер выходит из строя, вы все равно можете получить доступ к своим данным с других серверов в реплика сете.

### Полезное

- [Deploy a Replica Set for Testing and Development](https://www.mongodb.com/docs/manual/tutorial/deploy-replica-set-for-testing/)

### Задание

1. Пройти по ссылке задания в GitHub Classroom
   
   Задание выполняется в GitHub Classroom. После выполнения пришлите свою ссылку на рецензию ревьюеру в Stepik ([ССЫЛКА GITHUB CLASSROOM]).
2. Создайте скрипт `setup.sh`, который:
   - создаст реплика сет из 3 MongoDB серверов
   - каждый MongoDB контейнер использует образ `mongo:5.0.7`.
   - назовите каждый контейнер `mongo-1`, `mongo-2`, `mongo-3`.
   - `mongo-1` имеет порты `27017:27017`.
   - `mongo-2` имеет порты `27018:27018`.
   - `mongo-3` имеет порты `27019:27019`.
   - поднимите [бекап](https://stepik.org/media/attachments/lesson/705682/mongo-dump.tar.gz)
     в базу данных `reservations` в primary сервер MongoDB.
3. Запушить все необходимые файлы в репо `jusan-mongo`.

Чтобы проверить правильно ли запущено все, запустите [тестировщик](https://stepik.org/media/attachments/lesson/705682/checker-replicas.sh).

```bash
bash checker-replicas.sh
```

---

### Ответ

