# mongo-init

MongoDB — это документо-ориентированная база данных, не являющаяся реляционной. Основная причина отказа от реляционной модели — упрощение масштабирования. Однако, есть и другие преимущества.

Документо-ориентированная база данных заменяет концепцию "строки" (англ. "row") на более гибкую модель - "документ".
Документно-ориентированный подход позволяет представлять сложные иерархические отношения с помощью одной записи без фиксированной схемы - добавление или удаление полей по мере необходимости становится проще. 

Это ускоряет разработку, так как разработчики могут быстро выполнять итерации. Также, это позволяет проще экспериментировать. Разработчики могут опробовать десятки моделей данных, а затем выбрать лучшую из них.

## Масштабирование

По мере роста объема данных, разработчики сталкиваются с трудным решением: как им следует масштабировать свои базы данных? Масштабирование базы данных сводится к выбору между:

- вертикальным масштабированием (улучшать характеристики одного сервера);
- горизонтальным масштабированием (разделение данных на большое количество машин).

MongoDB был разработан для горизонтального масштабирования. Документо-ориентированная модель упрощает разделение данных между несколькими серверами. MongoDB автоматически заботится о балансировке данных и нагрузки в кластере.

## Богатый на функционал

MongoDB — это база данных общего назначения, поэтому помимо создания, чтения, обновления и удаления данных, она предоставляет большинство функций, которые есть в традиционных базах данных. Это включает:

- _Индексация_. MongoDB поддерживает индексы, а также предоставляет индексы на уникальность, на составные части, гео данные и полнотекстовые соответствия.
- _Агрегирование_. MongoDB предоставляет фреймворк для агрегирования, основанный на концепции пайплайнов обработки данных. Пайплайн агрегации позволяет создавать сложные механизмы аналитики, обрабатывая данные в несколько относительно простых этапов.
- _Специальные типы коллекций и индексов_. MongoDB поддерживает коллекции со временем жизни для данных, срок действия которых истекает в определенное время, например, пользовательские сеансы или логи.
- _Файловое хранилище_. MongoDB поддерживает простой в использовании протокол для хранения больших файлов и файловых метаданных.

Некоторые функции реляционных баз данных отсутствуют в MongoDB, в частности функции _JOIN_.

## Основные концепции

Разберем основные концепции MongoDB:

- Документ (англ. "document") является основной единицей данных и эквивалентен строке (англ. "row") в реляционных базах данных.
- Коллекцию (англ. "collection") можно рассматривать как таблицу, которая имеет динамическую схему.
- Один инстанс MongoDB может содержать несколько независимых баз данных, каждая из которых содержит собственные коллекции.
- У каждого документа есть специальный ключ `_id`, уникальный по всей коллекции.
- MongoDB распространяется с помощью CLI-инструмента — `mongo shell`. Он предоставляет встроенную поддержку для администрирования MongoDB и управления данными с использованием языка запросов MongoDB.

### Документ

Документ в MongoDB представляет из себя JSON-объект:

```js
{
    "_id": ObjectId("5ce45d7606444f199acfba1e"),
    "name": "Ali",
    "email": "ali@gmail.com",
    "age": 25
}
```

Коллекция содержит много таких документов.

В документе каждое поле может быть любого типа - число, строка, массив, вложенный документ и т.д.

## Установка MongoDB

Установку MongoDB нужно производить из офф.репозитория разработчика MongoDB.

Инструкции по установке доступны по [ссылке](https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-ubuntu/).

Также, для локального тестирования можно запустить в [контейнере](https://hub.docker.com/_/mongo).

## Mongo Express

Mongo Express — это простой веб-интерфейс для интерактивного администрирования MongoDB.

Его можно запустить в контейнере, передав ссылку для подключения на MongoDB.

Например, чтобы запустить MongoDB и Mongo Express в контейнерах, можете воспользоваться
следующим `docker-compose.yml`:

```yaml
services:
  mongo:
    image: mongo
    restart: always
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: example

  mongo-express:
    image: mongo-express
    restart: always
    ports:
      - 8081:8081
    environment:
      ME_CONFIG_MONGODB_ADMINUSERNAME: root
      ME_CONFIG_MONGODB_ADMINPASSWORD: example
      ME_CONFIG_MONGODB_URL: mongodb://root:example@mongo:27017/
```
