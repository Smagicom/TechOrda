# ansible-galaxy

Роли в Ansible мощные и гибкие; они собирают в себе наборы конфигураций, таски,
переменные, шаблоны и другие файлы, чтобы их можно было легко переиспользовать
на разных серверах.

Однако каждый раз начинать с нуля писать роли - это неудобно; было бы лучше,
если бы люди могли совместно использовать роли для часто устанавливаемых приложений и сервисов.

## Ansible Galaxy

Ansible Galaxy — это репозиторий Ansible ролей и не только, который поддерживается
людьми со всего света. Существуют тысячи доступных ролей, которые могут настраивать
и развертывать популярные приложения, и все они доступны через команду `ansible-galaxy`.

## Получение ролей из Galaxy

Одной из основных функций команды `ansible-galaxy` является получение ролей из Galaxy.
Роли должны быть загружены, прежде чем их можно будет использовать в плейбуках.

Например, команду по скачиванию роли, которая устанавливает PHP на сервер:

```bash
ansible-galaxy install geerlingguy.php
```

## Использование requrements.yaml чтобы описать зависимости плейбука

Если конфигурация вашей инфраструктуры требует большого количества ролей Ansible,
установка их всех с помощью команд установки ролей `ansible-galaxy` может быть утомительной.

Однако вы можете передать команде `ansible-galaxy` файл зависимостей и запустить с флагом `-r`
для автоматической загрузки всех зависимостей.

Пример файла requirements.yml выглядит так:

```yaml
roles:
  - name: geerlingguy.nginx

  - name: geerlingguy.php
    version: 4.7.0
```

Чтобы установить роли, определенные в файле `requirements.yml`, используйте команду:

```bash
ansible-galaxy install -r requirements.yml
```

Теперь для того, чтобы вызвать скачанные роли в нашем плейбуке, их можно просто
добавить как обычную роль, как мы делали раньше.

```yaml
---
- hosts: all
  become: yes

  roles:
    - geerlingguy.nginx
    - geerlingguy.php
```

### Задание

1. В репозитории ([ССЫЛКА GITHUB CLASSROOM]) создайте ветку `galaxy`, которая исходит от ветки `vault`.
   Вести работу будем в ней.
2. Установите роль [geerlingguy.nginx](https://galaxy.ansible.com/geerlingguy/nginx).
3. Замените роль `nginx` на `geerlingguy.nginx`.
4. Удалите роль `nginx` из `roles`.
5. Запишите в файл `requirements.yaml` зависимости.
6. Запустите и проверьте на работоспособность.
7. Запушить в гит.
8. Прислать ссылку на репозиторий.

---

### Ответ
